импорт ОбщиеСтандартные
импорт Компания::Согласования
импорт Криптография

@Обработчик
@ВыполнятьПриЗагрузкеДанных
метод ПередЗаписью(ПредыдущееЗначение: РасчетныеЛисты.Данные, ПараметрыЗаписи: РасчетныеЛисты.ПараметрыЗаписи)
    ЗаполнитьПредставление()
;

@Обработчик
@ВыполнятьПриЗагрузкеДанных
метод ПослеЗаписи(ПредыдущееЗначение: РасчетныеЛисты.Данные, ПараметрыЗаписи: РасчетныеЛисты.ПараметрыЗаписи)
    исп КонтекстДоступа.Привилегированный()
    РасчетныеЛисты.ПослеЗаписиДополнение(Ссылка, ФизическоеЛицо)
;

метод ЗаполнитьПредставление()
    пер ТекстПредставления: Строка
    ТекстПредставления = МенеджерСущности.ПредставлениеСсылки(ФизическоеЛицо)
    ТекстПредставления += " " + Зарплата.ПредставлениеРасчтеногоЛиста(Месяц, ПерваяПоловинаМесяца)
    ПредставлениеЛиста = ТекстПредставления
;

@Обработчик
@ВыполнятьПриЗагрузкеДанных
метод ПередУдалением(ПараметрыУдаления: РасчетныеЛисты.ПараметрыУдаления)
    для РасчетныйЛистНаПодпись из РасчетныеЛистыНаПодпись
        пер ОбъектРасчетныйЛистНаПодпись = РасчетныйЛистНаПодпись.ЗагрузитьОбъект(Истина)
        если ОбъектРасчетныйЛистНаПодпись != Неопределено
            ОбъектРасчетныйЛистНаПодпись.Удалить()
        ;
    ;
    МенеджерСущности.УдалитьПодчиненныеОбъекты(Ссылка, Тип<УниверсальныеМеханизмы::Файлы>)
    МенеджерСущности.УдалитьПодчиненныеОбъекты(Ссылка, Тип<СогласованияДокументов>, "Документ")
    МенеджерСущности.УдалитьПодчиненныеОбъекты(Ссылка, Тип<ПодписиДокументов>, "Документ")
;