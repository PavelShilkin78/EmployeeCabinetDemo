импорт ОбщиеСтандартные

@ВПроекте
@Реализация
метод Инициализировать()
    ПрочитатьДанныеФизическогоЛица()
    МенеджерГлобальныхКлиентскихСобытий.ПодключитьОбработчик(метод (Источник, Параметры) ->
        если Источник != ФизЛица.ТРЕБУЕТСЯ_ОБНОВЛЕНИЕ_ДАННЫХ_ФИЗИЧЕСКОГО_ЛИЦА
            возврат
        ;
        ПриИзмененииДанныхФизическогоЛица()
    ;)

;

метод УстановленноеФизическоеЛицо(): Объект?
    возврат ФизическоеЛицоОбъект
;

метод ПрочитатьДанныеФизическогоЛица()
    если ФизическоеЛицоОбъект != Неопределено
        ЛичныеДанныеФизическогоЛица = ЗагрузитьЛичныеДанныеФизическогоЛица(ФизическоеЛицоОбъект!.Ссылка)
    ;
;

@НаСервере @ДоступноСКлиента
статический метод ЗагрузитьЛичныеДанныеФизическогоЛица(ФизическоеЛицо: ФизическиеЛица.Ссылка): ЛичныеДанныеФизическихЛиц.Объект?
    знч ЛичныеДанные = ЛичныеДанныеФизическихЛиц.ЛичныеДанныеФизическогоЛица(ФизическоеЛицо)
    возврат ЛичныеДанные?.ЗагрузитьОбъект()    
;

метод ПриИзмененииДанныхФизическогоЛица()
    ПрочитатьДанныеФизическогоЛица()        
;

метод ДатаРожденияСтрокой(): Строка
    пер ДатаРождения: Строка = "Дата рождения не указана"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        пер Дата: Дата? = ЛичныеДанныеФизическогоЛица!.ДатаРождения
        если Дата != Неопределено 
            ДатаРождения = МенеджерДат.ФорматДаты(Дата)
        ;
    ;
    возврат ДатаРождения
;

метод ВидУдостоверенияЛичностиСтрокой(): Строка
    пер ВидУдостоверенияЛичности: Строка = "Паспортные данные отсутствуют"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        ВидУдостоверенияЛичности = (ЛичныеДанныеФизическогоЛица!.ВидУдостоверенияЛичности).Представление()
    ;
    возврат ВидУдостоверенияЛичности
;    

метод ДокументДатаВыдачиСтрокой(): Строка
    пер ДатаВыдачи: Строка = "Дата не указана"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        пер Дата: Дата? = ЛичныеДанныеФизическогоЛица!.ДокументДатаВыдачи
        если Дата != Неопределено 
            ДатаВыдачи = МенеджерДат.ФорматДаты(Дата)
        ;
    ;
    возврат ДатаВыдачи
;

метод ФотографияВидимость(): Булево
    возврат КлиентскоеУстройство.ВидИнтерфейса == ВидИнтерфейса.Телефон
;

метод МестоРожденияСтрокой(): Строка
    пер МестоРождения: Строка = "Место рождения не указано"
    если ЛичныеДанныеФизическогоЛица != Неопределено и не ЛичныеДанныеФизическогоЛица!.МестоРождения.Пусто()
        МестоРождения = ЛичныеДанныеФизическогоЛица!.МестоРождения
    ;
    возврат МестоРождения
;

метод ИННЗаголовок(): Строка
    пер ИНН: Строка = "Не указан"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        ИНН = ЛичныеДанныеФизическогоЛица!.ИНН
    ;
    возврат ИНН
;

метод СНИЛСЗаголовок(): Строка
    пер СНИЛС: Строка = "Не указан"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        СНИЛС = ЛичныеДанныеФизическогоЛица!.СНИЛС
    ;
    возврат СНИЛС
;

метод СерияЗаголовок(): Строка
    пер Серия: Строка = "Отсутствует"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        Серия = ЛичныеДанныеФизическогоЛица!.ДокументСерия
    ;
    возврат Серия
;

метод НомерЗаголовок(): Строка
    пер Номер: Строка = "Не указан"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        Номер = ЛичныеДанныеФизическогоЛица!.ДокументНомер
    ;
    возврат Номер
;

метод ВыдавшийОрганЗаголовок(): Строка
    пер ВыдавшийОрган: Строка = "Не указан орган, выдавший документ удостоверящий личность"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        ВыдавшийОрган = ЛичныеДанныеФизическогоЛица!.ДокументВыдавшийОрган
    ;
    возврат ВыдавшийОрган
;

метод КодВыдавшегоОрганаЗаголовок(): Строка
    пер КодВыдавшегоОргана: Строка = "Не указан"
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        КодВыдавшегоОргана = ЛичныеДанныеФизическогоЛица!.ДокументКодВыдавшегоОргана
    ;
    возврат КодВыдавшегоОргана
;

метод АдресРегистрацииЗаголовок(): Строка
    если ЛичныеДанныеФизическогоЛица != Неопределено
        и ЛичныеДанныеФизическогоЛица!.АдресРегистрации == ЛичныеДанныеФизическогоЛица!.АдресМестаПроживания
        возврат "Адрес регистрации (проживания)"
    ;
    возврат "Адрес регистрации" 
;

метод АдресРегистрацииЗначение(): Строка
    если ЛичныеДанныеФизическогоЛица != Неопределено
        возврат ЛичныеДанныеФизическогоЛица!.АдресРегистрации
    ;
    возврат ""
;

метод АдресРегистрацииВидимость(): Булево
    если ЛичныеДанныеФизическогоЛица != Неопределено и не ЛичныеДанныеФизическогоЛица!.АдресРегистрации.Пусто()
        возврат Истина
    ; 
    возврат Ложь
;

метод АдресМестаПроживанияЗначение(): Строка
    если ЛичныеДанныеФизическогоЛица != Неопределено
        возврат ЛичныеДанныеФизическогоЛица!.АдресМестаПроживания
    ;
    возврат ""
;

метод АдресМестаПроживанияВидимость(): Булево
    если ЛичныеДанныеФизическогоЛица != Неопределено и не ЛичныеДанныеФизическогоЛица!.АдресМестаПроживания.Пусто()
        если ЛичныеДанныеФизическогоЛица!.АдресРегистрации != ЛичныеДанныеФизическогоЛица!.АдресМестаПроживания
            возврат Истина
        ;
    ; 
    возврат Ложь
;

метод ПочтовыеАдресаВидимость(): Булево
    если ЛичныеДанныеФизическогоЛица != Неопределено 
        и (АдресРегистрацииВидимость()
            или АдресМестаПроживанияВидимость())

            возврат Истина
    ;
    возврат Ложь    
;