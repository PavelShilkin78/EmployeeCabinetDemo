импорт Компания::Согласования
импорт ОбщиеСтандартные


@ВПроекте
@Реализация
метод Обновить()
    ЗаявкиНаСогласовании.Очистить()
    ЗаявкиНаСогласовании.ДобавитьВсе(ПодборПерсонала.ДокументыНаСогласовании())
    если не ЗаявкиНаСогласовании.Пусто()
        Видимость = Истина
        Компоненты.ТаблицаСогласование.Обновить()
    иначе
        Видимость = Ложь
    ;
;

метод ПодключитьОбработчикиОбновления()
    ЗаявкаНаПодборПослеИзменения.ПодключитьОбработчик(Заявка -> Обновить())
    МенеджерГлобальныхКлиентскихСобытий.ПодключитьОбработчик(метод (Источник, Параметры) ->
        выбор Источник
        когда Согласования.ДОКУМЕНТ_СОГЛАСОВАН
            Обновить()
        ;
    ;)  
;

@Обработчик
метод ПослеСоздания()
    ПодключитьОбработчикиОбновления()
    Обновить()
;

метод ПриНажатииСтроки(Источник: Список<ДинамическийСписок>, Событие: СобытиеСДанными<СтрокаСписка<СтрокаДинамическогоСписка>>)
    КарточкаЗаявкиНаПодбор.Показать(Событие.Данные.ДанныеСтроки.Ключ как ЗаявкиНаПодбор.Ссылка, ФормаВладелец)
;