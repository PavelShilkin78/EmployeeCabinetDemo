импорт ИнтерфейсныеКомпонентыСтандартные
импорт Анкетирование
импорт ПодборПерсонала

// МетодыЗаполненияФормы

@ВПроекте
@Реализация
метод Инициализировать()
    АнкетаКандидата = АнкетаКандидатаИзНастроек()
;

// КонецМетодыЗаполненияФормы

метод ВернутьСтандартнуюАнкетуПриНажатии(Источник: Кнопка, Событие: СобытиеПриНажатии)
    знч Ответ = Диалог.Вопрос(
                "Шаблон анкеты по умолчанию будет перезаписан. Это повлияет на все анкеты, созданные по этому шаблону. Продолжить?", 
                [КнопкаДиалога.Да, КнопкаДиалога.Нет], 
                "Вернуть анкету",
                Ресурс{ПредупреждениеКонтур.svg}.Ссылка)
    если Ответ == КнопкаДиалога.Да
        ВернутьСтандартнуюАнкету()
        СтандартныеФормы.ПоказатьУведомление("Успешно!", "Анкета кандидата возвращена к исходному состоянию", ОценкаИнформации.Положительная)
    ;   
;

@НаСервере @ДоступноСКлиента
статический метод ВернутьСтандартнуюАнкету()
    ПредопределенныеВопросыАнкеты.АнкетаПоУмолчанию(АнкетаКандидатаИзНастроек())
;

@НаСервере @ДоступноСКлиента
статический метод АнкетаКандидатаИзНастроек(): ШаблоныАнкет.Ссылка?
    знч НастройкиПодбораПерсоналаОбъект = НастройкиПодбораПерсонала.СсылкаНастройкиПодбораПерсонала().ЗагрузитьОбъект()
    возврат НастройкиПодбораПерсоналаОбъект.АнкетаКандидата       
;

метод АнкетаКандидатаПриИзмененииЗначения(Источник: ПолеВвода<ШаблоныАнкет.Ссылка?>, Событие: СобытиеПриИзменении<ШаблоныАнкет.Ссылка?>)
    АнкетаКандидатаСохранить(Источник.Значение)
;

@НаСервере @ДоступноСКлиента
статический метод АнкетаКандидатаСохранить(Значение: ШаблоныАнкет.Ссылка?)
    исп Транзакции.Начать()
    знч НастройкиПодбораПерсоналаОбъект = НастройкиПодбораПерсонала.СсылкаНастройкиПодбораПерсонала().ЗагрузитьОбъект(Истина)
    НастройкиПодбораПерсоналаОбъект.АнкетаКандидата = Значение
    НастройкиПодбораПерсоналаОбъект.Записать()
;
