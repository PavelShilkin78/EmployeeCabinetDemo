импорт ИнтерфейсныеКомпонентыСтандартные
импорт ОбщиеСтандартные
импорт ФизическиеЛица
импорт УниверсальныеМеханизмы

@НаСервере @ДоступноСКлиента
статический метод Прочитать(Ссылка: СправкаСМестаРаботы.Ссылка): СправкаСМестаРаботы.Объект
    возврат Ссылка.ЗагрузитьОбъект()
;


@ВПроекте
@Реализация
метод Инициализировать()
    если СправкаСМестаРаботыСсылка != Неопределено
        пер ТабличныеЧасти = ДанныеТабличныхЧастей(СправкаСМестаРаботыСсылка)
        ТаблицаФайлы = ТабличныеЧасти.ТаблицаФайлы
        СправкаСМестаРаботы = Прочитать(СправкаСМестаРаботыСсылка)
        ФизическоеЛицо = СправкаСМестаРаботы.ФизическоеЛицо
    ;
    ИнтерфейсныеКомпоненты.ИнициализироватьПодчиненныеКомпоненты(Компоненты)
;

метод ОрганизацияНадпись(): Строка
    если СправкаСМестаРаботы == Неопределено
        возврат ""
    ;
    возврат МенеджерСущности.ПредставлениеСсылки(СправкаСМестаРаботы.МестоРаботы)
;

метод КомментарийЗначениеКомментария(): Строка
    пер Комментарий: Строка
    если СправкаСМестаРаботы != Неопределено
        Комментарий = СправкаСМестаРаботы.Комментарий
    ;
    возврат Комментарий
;

метод ПрисоединенныеФайлыФизическоеЛицо(): ФизическиеЛица.Ссылка?
    если СправкаСМестаРаботы != Неопределено
        возврат СправкаСМестаРаботы.ФизическоеЛицо
    ;
    возврат Неопределено
;

@НаСервере @НаКлиенте
структура ТабличныеЧасти
    пер ТаблицаФайлы: ПрисоединенныеФайлы
;

@НаСервере @ДоступноСКлиента
статический метод ДанныеТабличныхЧастей(Справка: СправкаСМестаРаботы.Ссылка): ТабличныеЧасти
    
    пер ДанныеТабличныхЧастей: ТабличныеЧасти
    ДанныеТабличныхЧастей.ТаблицаФайлы =
        ПрисоединенныеФайлыМенеджер.ПрисоединенныеФайлы(Справка,
            [ВидыФайла.ЭлектронныйДокумент, ВидыФайла.ДополнительноеПредставлениеЭлектронногоДокумента])
    возврат ДанныеТабличныхЧастей

;


// Контракт ВладелецПрисоединенныеФайлыКомпонент
@Реализация
@ВПроекте
метод ПрисоединенныеФайлыНачатаЗагрузкаФайлов(Источник: ПрисоединенныеФайлыКомпонент, Событие: неизвестно, ИдКомпонента: Строка = "")
;

@Реализация
@ВПроекте
метод ПрисоединенныеФайлыЗавершенаЗагрузкаФайлов(Источник: ПрисоединенныеФайлыКомпонент, Событие: неизвестно, ИдКомпонента: Строка = "")
;
// Конец ВладелецПрисоединенныеФайлыКомпонент

метод КомментарийВидимость(): Булево
    возврат не КомментарийЗначениеКомментария().Пусто()
;
