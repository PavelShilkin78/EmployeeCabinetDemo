импорт КонтрольДоступа

@Реализация
@ВПроекте
метод Инициализировать()
    знч Контакты = КонтактыПользователя()
    пер АдресОтправки: Строка
    если не Контакты.Телефон.Пусто()   
        АдресОтправки = "на номер %{Контакты.Телефон}"
    иначе
        АдресОтправки = "на электронную почту %{Контакты.ЭлектроннаяПочта}"
    ;
    Текст = 
        "Это ваш личный кабинет кандидата. Здесь вы сможете заполнить данные о себе; загрузить необходимые файлы и сканы; переписываться с рекрутером нашей компании; если потребуется, пройти дополнительное тестирование и т.д. Советуем вам сохранить ссылку на эту страницу в избранное вашего браузера. 
        Адрес вашего личного кабинета был также направлен вам %АдресОтправки."
;

@НаСервере @НаКлиенте
структура КонтактыПользователя
    пер Телефон: Строка
    пер ЭлектроннаяПочта: Строка 
;

@НаСервере @ДоступноСКлиента
статический метод КонтактыПользователя(): КонтактыПользователя
    
    пер Контакты: КонтактыПользователя
    
    исп КонтекстДоступа.Привилегированный()
    
    знч ПользователиПоИдентификаторам = ПользователиСистемы.ПользователиПоИдентификаторам()
    знч ОписаниеПользователя = ПользователиПоИдентификаторам[Пользователи.ТекущийИдПользователя]
    Контакты.Телефон = ОписаниеПользователя.Телефон
    Контакты.ЭлектроннаяПочта = ОписаниеПользователя.ЭлектроннаяПочта
    
    возврат Контакты
;