импорт ОбщиеСтандартные

@НаСервере @ДоступноСКлиента
статический метод ПоискПоСтроке(Текст: Строка, ТипСущности: Тип): Массив<ЭлементСпискаЗначений<Объект?>>
    знч ИмяТаблицы = МенеджерСущности.ИмяТаблицыПоТипу(ТипСущности)
    пер Запрос = новый ПроизвольныйЗапрос()
    Запрос.Текст =
        "Выбрать первые 10
            Ссылка как Ссылка,
            Представление как Представление
        Из
            %ИмяТаблицы"

    знч Результат = новый Массив<ЭлементСпискаЗначений<Объект?>>()
    для Элемент из Запрос.Выполнить()
        Результат.Добавить(
            новый ЭлементСпискаЗначений<Объект?>(
                Значение = Элемент.Ссылка,
                Представление = Элемент.Представление
            )
        )
    ;
    возврат Результат
;

метод ПриАвтоПодборе(Источник: ПолеВвода<Объект?>, Событие: СобытиеПриАвтоПодборе)
    если ТипЗначения == Неопределено
        возврат
    ; 
    Событие.СтандартнаяОбработка = Ложь
    знч ЗначенияАвтоПодбора = ПоискПоСтроке(Событие.Текст, ТипЗначения)
    ЗначенияАвтоПодбора.Добавить(
        новый ЭлементСпискаЗначений<Объект?>(
                Значение = новый ОписаниеСоздаваемогоЗначения(
                    ТипЗначения = ТипЗначения, 
                    Представление = Событие.Текст),
                Представление = "Создать: %{Событие.Текст}",
                ИзображениеНеактивного = Ресурс{Плюс.svg}.Ссылка
            )
    )
    Событие.ЗначенияАвтоПодбора = ЗначенияАвтоПодбора
;

метод ПриИзменении(Источник: ПолеВвода<Объект?>, Событие: СобытиеПриИзменении<Объект?>)
    если Событие.НовоеЗначение это ОписаниеСоздаваемогоЗначения
        ПриСозданииНовогоЭлемента(новый СобытиеСДанными<Объект?>(Событие.НовоеЗначение))
    ;
;