
@Обработчик
@ВыполнятьПриЗагрузкеДанных
метод ПередЗаписью(ПредыдущееЗначение: ЗаписиОтсутствий.Данные, ПараметрыЗаписи: ЗаписиОтсутствий.ПараметрыЗаписи)
    ЗаполнитьПредставление()
    ЗаполнитьПризнакДолгосрочное()
    ЗаполнитьПризнакВнутрисменное()
;

/*
    Выставить метод наружу потребовалось для обработки старых данных
    см. УдалитьСловоПосле() 
*/

метод ЗаполнитьПредставление()
    если Начало == Неопределено или Окончание == Неопределено
        ПредставлениеОтсутствия = ""
    иначе если Внутрисменное
        ПредставлениеОтсутствия =  Отсутствия.ПредставлениеВнутрисменногоОтсутствия(Начало, Окончание, Причина)
    иначе
        ПредставлениеОтсутствия =  Отсутствия.ПредставлениеОтсутствия(ДатаНачала, ДатаОкончания, Причина)
    ;
;

метод ЗаполнитьПризнакДолгосрочное()
    Долгосрочное = Причина == ВидыОтсутствий.ОтпускПоБеременностиИРодам или Причина == ВидыОтсутствий.ОтпускПоУходуЗаРебенком
;

метод ЗаполнитьПризнакВнутрисменное()
    Внутрисменное = ДатаНачала == Неопределено
;