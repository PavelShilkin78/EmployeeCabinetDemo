импорт Компания
импорт КонтрольДоступа
импорт КонтрольДоступаСтандартные
импорт ОбменДанными
импорт СтандартноеПриложение
импорт УниверсальныеМеханизмы
импорт ФизическиеЛица

// Контракт ПараметрыСеансаПоставщик
@ВПроекте
@Реализация
метод КоллекцияПараметровСеанса(МобильныйИнтерфейс: Булево): Соответствие<Строка, Объект>
    пер ПараметрыСеанса = новый АдаптацияПерсонала.ПараметрыСеанса()
    ЗаполнитьПараметрыСеанса(ПараметрыСеанса)
    возврат {АдаптацияПерсонала.КЛЮЧ_ПАРАМЕТРОВ_СЕАНСА: ПараметрыСеанса}
;
// Конец ПараметрыСеансаПоставщик

// Контракт ПодсистемаПриложения

@ВПроекте
@Реализация
метод ОписаниеПодсистемы(): СтандартноеПриложение.ОписаниеПодсистемы
    возврат новый СтандартноеПриложение.ОписаниеПодсистемы(
        АдаптацияПерсонала.ИД_ПОДСИСТЕМЫ,
        {
            Компания.ИД_ПОДСИСТЕМЫ,
            КонтрольДоступа.ИД_ПОДСИСТЕМЫ, 
            ФизЛица.ИД_ПОДСИСТЕМЫ,
            ОбменДанными.ИД_ПОДСИСТЕМЫ,
            УниверсальныеМеханизмы.ИД_ПОДСИСТЕМЫ
        }
    )
;

// Конец ПодсистемаПриложения

// Контракт ОбновляемаяПодсистема

@ВПроекте
@Реализация
метод ОбработчикиЗаполнения(): Массив<СтандартноеПриложение.ОписаниеОбработчикаЗаполнения>
    возврат [новый СтандартноеПриложение.ОписаниеОбработчикаЗаполнения(
                    АдаптацияПерсонала.ИД_ПОДСИСТЕМЫ, 
                    "АдаптацияПерсоналаОбновитьСтроковыеРесурсы", 
                    &АдаптацияПерсонала.ОбновитьСтроковыеРесурсы()
                )
            ]
;

@ВПроекте
@Реализация
метод ОбработчикиОбновления(): Массив<СтандартноеПриложение.ОписаниеОбработчикаОбновления>
    пер Обработчики: Массив<СтандартноеПриложение.ОписаниеОбработчикаОбновления>
    пер Сервис = АдаптацияПерсоналаПоставщикВерсииПриложения.ПолучитьСервис()
    Обработчики.Добавить(новый СтандартноеПриложение.ОписаниеОбработчикаОбновления(
                АдаптацияПерсонала.ИД_ПОДСИСТЕМЫ, 
                "АдаптацияПерсоналаОбновитьСтроковыеРесурсы", 
                &АдаптацияПерсонала.ОбновитьСтроковыеРесурсы(),
                Сервис.АдаптацияПерсоналаОбновитьСтроковыеРесурсы()))          
    возврат Обработчики
;

// Конец ОбновляемаяПодсистема

//Контракт КонтрольДоступаПоПолномочиямСервис

@ВПроекте
@Реализация
метод ЗаполнитьПредопределенныеПолномочия()
    АдаптацияПерсонала.ДобавитьПолномочия()
;

@ВПроекте
@Реализация
метод ЗаполнитьПредопределенныеРоли()
;

@ВПроекте
@Реализация
метод ЗаполнитьПредопределенныеТипыАтрибутов()
;

@ВПроекте
@Реализация
метод СоздатьНаборыОграниченийДоступа()
;

@ВПроекте
@Реализация
метод ТипыАтрибутовПоТипамЗначений(): ЧитаемоеСоответствие<Тип, ТипыАтрибутов.Ссылка>
    возврат {:}
;

//Конец КонтрольДоступаПоПолномочиямСервис

// Контракт СтроковыеРесурсыПоставщик

@ВПроекте
@Реализация
метод ИменаРесурсовПоГруппеРесурсов(УчитыватьИспользуемуюФункциональность: Булево): Соответствие<Строка, Коллекция<Строка>>
    возврат {
        АдаптацияПерсонала.ГРУППА_РЕСУРСОВ_АДАПТАЦИЯ_ПЕРСОНАЛА: [
            АдаптацияПерсонала.АДАПТАЦИЯ_НОВОГО_СОТРУДНИКА_SMS,
            АдаптацияПерсонала.АДАПТАЦИЯ_НОВОГО_СОТРУДНИКА_PUSH, 
            АдаптацияПерсонала.АДАПТАЦИЯ_НОВОГО_СОТРУДНИКА_EMAIL, 
            АдаптацияПерсонала.АДАПТАЦИЯ_НОВОГО_СОТРУДНИКА_ТЕМА,
            АдаптацияПерсонала.ИЗМЕНЕН_СТАТУС_ПРОЦЕССА_АДАПТАЦИИ_SMS, 
            АдаптацияПерсонала.ИЗМЕНЕН_СТАТУС_ПРОЦЕССА_АДАПТАЦИИ_PUSH, 
            АдаптацияПерсонала.ИЗМЕНЕН_СТАТУС_ПРОЦЕССА_АДАПТАЦИИ_EMAIL,
            АдаптацияПерсонала.ИЗМЕНЕН_СТАТУС_ПРОЦЕССА_АДАПТАЦИИ_ТЕМА, 
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_РУКОВОДИТЕЛЬ_SMS, 
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_РУКОВОДИТЕЛЬ_PUSH,
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_РУКОВОДИТЕЛЬ_EMAIL, 
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_РУКОВОДИТЕЛЬ_ТЕМА, 
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_СОТРУДНИК_SMS,
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_СОТРУДНИК_PUSH, 
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_СОТРУДНИК_EMAIL, 
            АдаптацияПерсонала.МЕРОПРИЯТИЕ_ПРОСРОЧЕНО_СОТРУДНИК_ТЕМА]
    }
;

// Конец СтроковыеРесурсыПоставщик

метод ЗаполнитьПараметрыСеанса(ПараметрыСеанса: АдаптацияПерсонала.ПараметрыСеанса)
    ПараметрыСеанса.ФункциональныеОпции = ИспользуемаяФункциональность.ФункциональныеОпции()
    пер ФизическоеЛицо: ФизическиеЛица.Ссылка? = ПользователиСистемы.ТекущееФизическоеЛицо()
    если ФизическоеЛицо != Неопределено
        ПараметрыСеанса.ЭтоАдаптируемыйСотрудник = АдаптацияПерсонала.ЭтоАдаптируемыйСотрудник(ФизическоеЛицо)
        ПараметрыСеанса.ЭтоУчастникМероприятий = АдаптацияПерсонала.ЭтоУчастникМероприятий(ФизическоеЛицо)
        если РасширениеПерсонал.Доступно()
            знч ПросмотрИнформации = АдаптацияПерсонала.ПолномочиеПросмотрИнформацииПоПроцессуАдаптации()
            ПараметрыСеанса.ЭтоКонтролирующийАдаптацию = КонтрольДоступа.ЕстьПравоНаПолномочие(ПросмотрИнформации)
            знч РедактированиеИнформации = АдаптацияПерсонала.ПолномочиеРедактированиеИнформацииПоПроцессуАдаптации()
            ПараметрыСеанса.ЭтоОтветственныйЗаАдаптацию = КонтрольДоступа.ЕстьПравоНаПолномочие(РедактированиеИнформации)
        иначе
            знч ЭтоРуководитель = не ОрганизационнаяСтруктура.ПодразделенияРуководителя(ФизическоеЛицо).Пусто()
            ПараметрыСеанса.ЭтоКонтролирующийАдаптацию = ЭтоРуководитель и ПроцессыАдаптации.ЕстьПроцессыАдаптацииПоРуководителю(ФизическоеЛицо)
                                                            или МенеджерПравДоступа.ЭтоАдминистраторПриложения()
        ;
        знч РедактированиеИнформации = АдаптацияПерсонала.ПолномочиеРедактированиеИнформацииПоПроцессуАдаптации()
        ПараметрыСеанса.ДоступКОтчетам =  КонтрольДоступа.ЕстьПравоНаПолномочие(РедактированиеИнформации)
    иначе
        ПараметрыСеанса.ЭтоКонтролирующийАдаптацию = МенеджерПравДоступа.ЭтоАдминистраторПриложения()
    ;
    ПараметрыСеанса.ПоказыватьРаздел = ПараметрыСеанса.ФункциональныеОпции.ИспользованиеПодсистемы == Истина
                                        и (ПараметрыСеанса.ЭтоАдаптируемыйСотрудник
                                        или ПараметрыСеанса.ЭтоУчастникМероприятий
                                        или ПараметрыСеанса.ЭтоКонтролирующийАдаптацию)
;