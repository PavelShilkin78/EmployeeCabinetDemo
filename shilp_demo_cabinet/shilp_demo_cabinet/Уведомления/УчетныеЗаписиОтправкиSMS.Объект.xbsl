
@Обработчик
@ВыполнятьПриЗагрузкеДанных
метод ПередЗаписью(ПредыдущееЗначение: УчетныеЗаписиОтправкиSMS.Данные, ПараметрыЗаписи: УчетныеЗаписиОтправкиSMS.ПараметрыЗаписи)
    
    если ИспользоватьПоУмолчанию
        возврат
    ;
    
    знч Запрос = Запрос{
        Выбрать Первые 1
            Ссылка
        Из
            УчетныеЗаписиОтправкиSMS
        Где
            ИспользоватьПоУмолчанию
            И Ссылка != %Ссылка}
    исп Результат = Запрос.Выполнить()
    знч РезультатСтроки = новый ЧитаемыйМассив(Результат)
    если не (не РезультатСтроки.Пусто())
        ИспользоватьПоУмолчанию = Истина
    ;
;

@Обработчик
@ВыполнятьПриЗагрузкеДанных
метод ПослеЗаписи(ПредыдущееЗначение: УчетныеЗаписиОтправкиSMS.Данные, ПараметрыЗаписи: УчетныеЗаписиОтправкиSMS.ПараметрыЗаписи)
    исп КонтекстДоступа.Привилегированный()
    если не ИспользоватьПоУмолчанию
        возврат
    ;
    знч Запрос = Запрос{
        Выбрать
            Ссылка
        Из
            УчетныеЗаписиОтправкиSMS
        Где
            ИспользоватьПоУмолчанию
            И Ссылка != %Ссылка}
    исп Результат = Запрос.Выполнить()
    знч РезультатСтроки = новый ЧитаемыйМассив(Результат)
    если (не РезультатСтроки.Пусто())
        пер ПредыдущаяУчетнаяЗапись = РезультатСтроки[0].Ссылка.ЗагрузитьОбъект(Истина)
        ПредыдущаяУчетнаяЗапись.ИспользоватьПоУмолчанию = Ложь
        ПредыдущаяУчетнаяЗапись.Записать()
    ;
;