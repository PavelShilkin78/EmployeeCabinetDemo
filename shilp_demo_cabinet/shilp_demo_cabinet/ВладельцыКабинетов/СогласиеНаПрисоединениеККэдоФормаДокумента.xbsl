импорт ОбщегоНазначения
импорт Компания::Согласования
импорт УниверсальныеМеханизмы
импорт ИнтерфейсныеКомпонентыСтандартные

//Область ОбработчикиСобытийФормы

@Обработчик
метод ПослеЧтения()
    СостояниеЗапроса = ОбщегоНазначения.СостояниеДокумента(Объект)
    пер ДополнительныеДанные = ДополнительныеДанныеДокумента(Объект.Ссылка)
    ТаблицаСогласующие  = ДополнительныеДанные.ТаблицаСогласующие
    ФайлСогласия        = ДополнительныеДанные.ФайлСогласия
    ИспользуетсяУнэп = ВладельцыКабинетов.ПараметрыСеанса().ФункциональныеОпции.ПолучениеСогласияКэдоУнэп
    ИнтерфейсныеКомпоненты.ИнициализироватьПодчиненныеКомпоненты(Компоненты)
    
    ЧтениеДанныхЗавершено = Истина
;

//КонецОбласти

//Область ОбработчикиСобытийЭлементовФормы

метод ПрисоединенныеФайлыЗавершенаЗагрузкаФайлов(Источник: ПрисоединенныеФайлыКомпонент, Событие: неизвестно)
    знч КоличествоФайлов = ТаблицаФайлы.Файлы.Размер()
    ПрисоединенныеФайлыДобавлятьФайлы = (КоличествоФайлов  == 0)    
;

//КонецОбласти

@НаСервере @НаКлиенте
структура ДополнительныеДанныеДокумента
    обз пер ТаблицаСогласующие: Согласующие?
    обз пер ФайлСогласия: ПрисоединенныйФайл?
;

@НаСервере @ДоступноСКлиента
статический метод ДополнительныеДанныеДокумента(Ссылка: СогласиеНаПрисоединениеККэдо.Ссылка): ДополнительныеДанныеДокумента
    пер ТаблицаСогласующие  = Согласования.Согласующие(Ссылка)
    пер ФайлСогласия = СогласиеНаПрисоединениеККэдоСервер.ФайлСогласия(Ссылка)
    возврат новый ДополнительныеДанныеДокумента(ТаблицаСогласующие, ФайлСогласия)
;

метод ОсновнойКомпонентПанели(): Компонент
    возврат этот
;