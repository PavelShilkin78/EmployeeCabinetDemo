импорт КонтрольДоступа

//КонтрольДоступа

@Обработчик
метод ВычислитьРазрешенияДоступа(): ЧитаемаяКоллекция<РазрешениеДоступа>
    знч Разрешения = новый Массив<РазрешениеДоступа>()
    Разрешения.ДобавитьВсе(КонтрольДоступа.РазрешенияДоступаТаблицыКонтентДанныхАбонентаЧтениеВсем())
    возврат Разрешения
;

//Конец КонтрольДоступа
// НачальноеЗаполнение
структура ДанныеJson
    обз знч ID: Строка
    обз знч name: Строка
;

@ВПроекте
метод ЗаполнитьИностранныеЯзыкиПоУмолчанию()
    
    знч Результат = Запрос{выбрать Ссылка из ИностранныеЯзыки}.Выполнить()
    для Элемент из Результат
        знч ИностранныеЯзыкиОбъект = Элемент.Ссылка.ЗагрузитьОбъект()
        ИностранныеЯзыкиОбъект.Удалить()
    ;
    
    знч ДвоичныеДанные = Ресурс{languages.json}.Ссылка.Загрузить()
    знч ПотокЗаписи = новый СтроковыйПотокЗаписи()
    ДвоичныеДанные.Записать(ПотокЗаписи)
    знч ИностранныеЯзыкиПоУмолчанию = СериализацияJson.ПрочитатьОбъект(ПотокЗаписи.ВСтроку(), Тип<Массив<ДанныеJson>>)
    ПотокЗаписи.Закрыть()
    
    для Элемент из ИностранныеЯзыкиПоУмолчанию
        знч Ид = новый Ууид(Элемент.ID)
        пер ИностранныеЯзыкиОбъект = ИностранныеЯзыки.ПолучитьСсылку(Ид).ЗагрузитьОбъект()
        если ИностранныеЯзыкиОбъект == Неопределено
            ИностранныеЯзыкиОбъект = новый ИностранныеЯзыки.Объект(Ид)
        ;
        ИностранныеЯзыкиОбъект.Наименование = Элемент.name
        ИностранныеЯзыкиОбъект.Записать()
    ;
;
// Конец НачальноеЗаполнение