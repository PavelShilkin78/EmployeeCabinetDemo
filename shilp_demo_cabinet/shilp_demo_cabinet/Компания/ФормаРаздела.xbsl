импорт ИнтерфейсныеКомпонентыСтандартные
импорт ФизическиеЛица

@ВПроекте
@Реализация
метод Заголовок(): Строка
    возврат ""
;

@ВПроекте
@Реализация
метод КомандыСоздания(): Команда|ГруппаКомандногоИнтерфейса<Команда>|Неопределено
    возврат Неопределено
;

@ВПроекте
@Реализация
метод ДополнительныеКоманды(): ФрагментКомандногоИнтерфейса<Команда>?
    возврат ДополнительныеКомандыФормы
;

@ВПроекте
@Реализация
метод ОсновнаяКоманда(): Команда?
    возврат Неопределено
;

@ВПроекте
@Реализация
метод ОбычныеКоманды(): ФрагментКомандногоИнтерфейса<Команда>?
    возврат Неопределено
;

@Обработчик
метод ПослеСоздания()
    ПользовательСотрудник = Компания.ПараметрыСеанса().ТекущийПользовательСотрудник
    ИнтерфейсныеКомпоненты.ИнициализироватьПодчиненныеКомпоненты(Компоненты)
    Компоненты.СписокСотрудниковИПодразделений.Инициализировать()
;


метод ПереключениеСписокСхема(Команда: ПереключаемаяКоманда)
    РежимОтображения = Команда.Активна ? Компания.РежимОтображения.Схема : Компания.РежимОтображения.Список
;

метод ЗаглушкаВидимость(): Булево
    возврат не ЕстьДанныеПоКомпании()
;

метод СводныеДанныеКомпанииВидимость(): Булево
    возврат не ЗаглушкаВидимость()
;

метод ДанныеПоСотрудникамИПодразделениямВидимость(): Булево
    возврат не ЗаглушкаВидимость() и не ПользовательСотрудник
;

метод СотрудникиИПодразделенияВидимость(): Булево
    возврат не ЗаглушкаВидимость() и ПользовательСотрудник
;


метод ЭлементСтруктурыДанные(ДанныеСтроки: СтрокаДинамическогоСписка?): ЧитаемоеСоответствие<Строка, Объект?>
    пер Данные: Соответствие<Строка, Объект?>
    если ДанныеСтроки != Неопределено
        возврат ДанныеСтроки!.Данные
    ;
    возврат Данные
;

метод ЭлементСтруктурыПодразделение(ДанныеСтроки: СтрокаДинамическогоСписка?): СтруктураПредприятия.Ссылка?
    пер Подразделение: СтруктураПредприятия.Ссылка?
    если ДанныеСтроки != Неопределено и ДанныеСтроки!.Данные["Объект"] это СтруктураПредприятия.Ссылка
        Подразделение = ДанныеСтроки!.Данные["Объект"] как СтруктураПредприятия.Ссылка?
    ;
    возврат Подразделение
;

метод ЭлементСтруктурыФизическоеЛицо(ДанныеСтроки: СтрокаДинамическогоСписка?): ФизическиеЛица.Ссылка?
    пер ФизическоеЛицо: ФизическиеЛица.Ссылка?
    если ДанныеСтроки != Неопределено
        ФизическоеЛицо = ДанныеСтроки!.Данные["ФизическоеЛицо"] как ФизическиеЛица.Ссылка?
    ;
    возврат ФизическоеЛицо
;

@НаСервере @ДоступноСКлиента
статический метод ЕстьДанныеПоКомпании(): Булево
    знч Запрос = Запрос{
        Выбрать Первые 1
            Ссылка
        Из
            ПодразделенияИСотрудники
    }
    возврат Запрос.Выполнить().ЕдинственныйИлиУмолчание() != Неопределено
;