импорт СтандартноеПриложение
импорт ВебApi
импорт ПриложениеНастройки

@ВПодсистеме
метод ПолучитьИнформациюПриложения(ЗапросHttp: HttpСервисЗапрос)
     попытка           
        знч ИнформацияJson = МенеджерСервисаПриложение.ПолучитьИнформациюОПриложении()
        СервисыHttp.УпаковатьДанныеJson(ЗапросHttp, ИнформацияJson)
    поймать Ошибка: Исключение
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, Ошибка)
    ;    
;

@ВПодсистеме
метод УстановитьНастройкиПриложения(ЗапросHttp: HttpСервисЗапрос)
    попытка    
        знч НастройкиJson = СервисыHttp.ИзвлечьДанныеJson(ЗапросHttp, Тип<НастройкиПриложенияJson>)    
        МенеджерСервисаПриложение.УстановитьНастройкиПриложения(НастройкиJson)
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, СервисыHttp.КодыСостояний.ОК_200)
    поймать Ошибка: Исключение
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, Ошибка)
    ;
;

@ВПодсистеме
метод ОбновитьНастройкиПриложения(ЗапросHttp: HttpСервисЗапрос)
    попытка
        знч ТелоЗапроса = ЗапросHttp.Тело.ПрочитатьКакСтроку()
        знч НастройкиJson = СериализацияJson.ПрочитатьОбъект(ТелоЗапроса, Тип<НастройкиПриложенияJson>)
        знч Ключи = (СериализацияJson.ПрочитатьОбъект(ТелоЗапроса) как Соответствие<Строка, Объект?>).Ключи()
        МенеджерСервисаПриложение.ОбновитьНастройкиПриложения(НастройкиJson, Ключи)
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, СервисыHttp.КодыСостояний.ОК_200)
    поймать Ошибка: Исключение
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, Ошибка)
    ;
        
;

@ВПодсистеме
метод УстановитьДоступностьПриложения(ЗапросHttp: HttpСервисЗапрос)
    попытка
        знч ДоступностьJson = СервисыHttp.ИзвлечьДанныеJson(ЗапросHttp, Тип<ДоступностьПриложенияJson>)
        МенеджерСервисаПриложение.УстановитьДоступностьПриложения(ДоступностьJson)        
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, СервисыHttp.КодыСостояний.ОК_200)
    поймать Ошибка: Исключение
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, Ошибка)
    ;
;

@ВПодсистеме
метод ПолучитьДоступностьПриложения(ЗапросHttp: HttpСервисЗапрос)
    попытка
        знч ДоступностьJson = МенеджерСервисаПриложение.ПолучитьДоступностьПриложения()            
        СервисыHttp.УпаковатьДанныеJson(ЗапросHttp, ДоступностьJson)
    поймать Ошибка: Исключение
        СервисыHttp.ЗаполнитьОтвет(ЗапросHttp, Ошибка)
    ;
    
;

